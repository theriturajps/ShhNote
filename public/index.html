<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="logo.png" type="image/x-icon">
  <title>ShareText - Real-time Text Sharing</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Add QRCode.js library [ <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script> ] -->
  <script src="./js/qrcode.min.js"></script>
</head>

<body>
  <div class="app-container">
    <header>
      <h1><i class="fas fa-share-alt"></i> ShareText</h1>
      <div class="header-right">
        <div class="header-link">
          <a href="https://github.com/theriturajps" target="_blank" rel="noopener">
            <img src="https://cdn-icons-png.flaticon.com/512/1051/1051326.png" alt="GitHub" class="header-icon" />
          </a>
        </div>
        <div class="connection-status">
          <span id="status-indicator"></span>
          <span id="status-text">Connecting...</span>
        </div>
      </div>
    </header>

    <main>
      <!-- Welcome Screen -->
      <div id="welcome-screen" class="screen active">
        <div class="welcome-card">
          <h2>Start Sharing</h2>
          <div class="button-group">
            <button id="create-room-btn" class="primary-btn">
              <i class="fas fa-plus"></i> New Room
            </button>

            <div class="join-room-container">
              <div class="room-code-input">
                <input type="number" id="part1" maxlength="3" placeholder="000" pattern="\d{3}">
                <span>-</span>
                <input type="number" id="part2" maxlength="3" placeholder="000" pattern="\d{3}">
                <span>-</span>
                <input type="number" id="part3" maxlength="3" placeholder="000" pattern="\d{3}">
              </div>
              <button id="join-room-btn" class="secondary-btn">
                <i class="fas fa-sign-in-alt"></i> Join
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Room Screen -->
      <div id="room-screen" class="screen">
        <div class="room-header">
          <div class="room-id-container">
            <span>Room: </span>
            <span id="current-room-id" class="room-id"></span>
            <button id="copy-room-id" class="icon-btn" title="Copy ID">
              <i class="fas fa-copy"></i>
            </button>
            <button id="share-qr-btn" class="icon-btn" title="Share QR Code">
              <i class="fas fa-qrcode"></i>
            </button>
          </div>
          <div class="room-actions">
            <button id="clear-room-btn" class="action-btn" title="Clear">
              <i class="fas fa-eraser"></i>
            </button>
            <button id="delete-room-btn" class="action-btn danger-btn" title="Delete">
              <i class="fas fa-trash"></i>
            </button>
            <button id="exit-room-btn" class="action-btn" title="Exit">
              <i class="fas fa-sign-out-alt"></i>
            </button>
          </div>
        </div>

        <div class="editor-container">
          <textarea id="text-editor" placeholder="Start typing here..."></textarea>
          <div class="editor-footer">
            <span id="save-status">Saved</span>
            <div class="users-count">
              <i class="fas fa-users"></i>
              <span id="user-count">0</span>
            </div>
          </div>
        </div>

        <div class="users-panel">
          <h3><i class="fas fa-users"></i> Active Users</h3>
          <ul id="users-list"></ul>
        </div>
      </div>
    </main>

    <!-- Notifications -->
    <div id="notification-container"></div>

    <!-- QR Code Modal -->
    <div id="qr-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Share Room</h3>
          <button id="close-qr-modal" class="icon-btn">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div id="qr-code"></div>
          <p>Scan this QR code to join the room</p>
          <div class="room-url">
            <input type="text" id="room-url-input" readonly>
            <button id="copy-url-btn" class="icon-btn" title="Copy URL">
              <i class="fas fa-copy"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="js/client.js" type="module"></script>
  </div>
</body>

</html>